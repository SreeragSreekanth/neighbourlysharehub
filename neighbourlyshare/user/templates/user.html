{% extends 'user_layout.html' %}

{% block title %}User Dashboard{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center">Welcome, {{ user.username }}!</h2>
    <p class="text-center">Manage your activities and stay updated.</p>

    <!-- Dashboard Sections -->
    <div class="row">
        <!-- Profile Overview -->
        <div class="col-md-4">
            <h4>Profile</h4>
            <ul class="list-group">
                <li class="list-group-item"><strong>Username:</strong> {{ user.username }}</li>
                <li class="list-group-item"><strong>Email:</strong> {{ user.email }}</li>
            </ul>
            <a href="#" class="btn btn-primary mt-3">Edit Profile</a>
        </div>

        <!-- Notifications Overview -->
        <div class="col-md-4">
            <h4>Notifications</h4>
            {% if notifications %}
                <ul class="list-group">
                    {% for notification in notifications|slice:":3" %}
                        <li class="list-group-item {% if not notification.is_read %}bg-light{% endif %}">
                            {{ notification.message }}
                            <a href="{% url 'notification_detail' notification.id %}" class="btn btn-sm btn-primary">View</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No new notifications.</p>
            {% endif %}
            <a href="{% url 'notification_list' %}" class="btn btn-secondary mt-3">View All Notifications</a>
        </div>

        <!-- Requests Overview -->
        <div class="col-md-4">
            <h4>Requests</h4>
            <ul class="list-group">
                {% for request in recent_requests|slice:":3" %}
                    <li class="list-group-item">
                        {{ request.offered_item.title }} for {{ request.requested_item.title }}
                        <span class="badge bg-info">{{ request.get_status_display }}</span>
                    </li>
                {% endfor %}
            </ul>
            <a href="{% url 'request_list' %}" class="btn btn-secondary mt-3">View All Requests</a>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="mt-5 text-center">
        <a href="#" class="btn btn-success">Post New Item</a>
        <a href="#" class="btn btn-info">Manage Shared Items</a>
        <a href="#" class="btn btn-warning">Account Settings</a>
    </div>
</div>
{% endblock %}
